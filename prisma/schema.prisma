generator client {
  provider        = "prisma-client-js"
}

datasource db {
  provider  = "postgresql"
  
}

model Product {
  id          String   @id @default(cuid())
  name        String
  brand       String
  scale       String
  price       String

  // THE KEY CHANGE: We store a list of URLs, not just one
  images      String[] 
  video       String? 

  description String?
  editorsNote String?
  material    String?
  condition   String?

  featured    Boolean  @default(false)
  collectionStatus CollectionStatus @default(ARCHIVE_CATALOG)
  genre       Genre?
  modelYear   Int?
  stock       Int      @default(1)
  orderItems  OrderItem[]
  createdAt   DateTime @default(now())
}

model Order {
  id             String @id @default(cuid())

  // Associates order with a user from Clerk, optional for guest checkouts
  userId         String?

  firstName      String
  lastName       String
  email          String
  phone          String
  address        String
  city           String
  postalCode     String
  country        String
  shippingMethod String
  trackingNumber String?
  shippingCost   Float       @default(0)
  total          Float
  status         String      @default("PENDING") // Fulfillment status: PENDING, SHIPPED, DELIVERED
  items          OrderItem[]

  // Payment-related fields
  paymentStatus     String  @default("UNPAID") // UNPAID, PAID, FAILED
  razorpayOrderId   String? @unique
  razorpayPaymentId String? @unique
  razorpaySignature String?

  createdAt DateTime @default(now())
}



model OrderItem {



  id        String @id @default(cuid())



  name      String



  price     Float



  quantity  Int



  image     String



  order     Order  @relation(fields: [orderId], references: [id])
  orderId   String

  product   Product @relation(fields: [productId], references: [id])
  productId String



}







model JournalEntry {


  id          String   @id @default(cuid())

  title       String

  slug        String   @unique

  content     String

  author      String?
  
  genre       Genre?

  isPublished Boolean  @default(false)

  createdAt   DateTime @default(now())

  updatedAt   DateTime @updatedAt

  images      String[]

  video       String?


}

enum CollectionStatus {
  ARCHIVE_CATALOG
  NEW_ARRIVAL
  FEATURED_EXHIBIT
}

enum Genre {
  CLASSIC_VINTAGE
  RACE_COURSE
  CITY_LIFE
  SUPERPOWERS
  LUXURY_REDEFINED
  OFF_ROAD
  FUTURE_PROOF
}
